# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: blueprints.cloud.google.com/v1alpha1
kind: BlueprintMetadata
metadata:
  name: terraform-google-cloud-storage-display
  annotations:
    config.kubernetes.io/local-config: "true"
spec:
  info:
    title: Terraform Google Cloud Storage Module
    source:
      repo: https://github.com/terraform-google-modules/terraform-google-cloud-storage.git
      sourceType: git
      dir: /modules/simple_bucket
  ui:
    input:
      variables:
        autoclass:
          name: autoclass
          title: Autoclass
          level: 1
        bucket_policy_only:
          name: bucket_policy_only
          title: Bucket Policy Only
          level: 1
        cors:
          name: cors
          title: Cors
          properties:
            method:
              name: method
              title: Method
              regexValidation: ^(GET|HEAD|POST|PUT|DELETE|OPTIONS|PATCH)$
              validation: Method must be one of [GET, HEAD, POST, PUT, DELETE, OPTIONS, PATCH].
            origin:
              name: origin
              title: Origin
              regexValidation: "^([*]|(https?)://([a-zA-Z0-9.-]+|[0-9a-fA-F:]+)(:([0-9]{1,5}))?)$"
              validation: Must be "*" or a valid HTTP/HTTPS origin, optionally including a port (e.g., https://example.com, http://localhost:8080).
            response_header:
              name: response_header
              title: Response Header
              regexValidation: "^([*]|[A-Za-z0-9]+(-[A-Za-z0-9]+)*)$"
              validation: Must be "*" or a valid HTTP header name containing only letters, digits, and hyphens, and must start and end with a letter or digit (e.g., Content-Type, X-Custom-Header)
        custom_placement_config:
          name: custom_placement_config
          title: Custom Placement Config
          properties:
            data_locations:
              name: data_locations
              title: Data Locations
              regexValidation: "^[A-Za-z]+(?:-[A-Za-z0-9]+)*(?:,[A-Za-z]+(?:-[A-Za-z0-9]+)*)*$"
              validation: Must be a region ID in the format REGION-NAME+NUMBER (e.g., US-CENTRAL1, EUROPE-WEST4, ASIA-SOUTH1)
        encryption:
          name: encryption
          title: Encryption
          level: 1
          properties:
            default_kms_key_name:
              name: default_kms_key_name
              title: Default KMS Key Name
              regexValidation: "^projects/[A-Za-z0-9_-]+/locations/[A-Za-z0-9_-]+/keyRings/[A-Za-z0-9_-]+/cryptoKeys/[A-Za-z0-9_-]+$"
              validation: Must be a valid Cloud KMS key resource name in the format projects/{project}/locations/{location}/keyRings/{keyRing}/cryptoKeys/{cryptoKey}
        force_destroy:
          name: force_destroy
          title: Force Destroy
          invisible: false
        hierarchical_namespace:
          name: hierarchical_namespace
          title: Hierarchical Namespace
        iam_members:
          name: iam_members
          title: Iam Members
          properties:
            role:
              name: role
              title: Role
              regexValidation: "^(?:[a-z][a-z0-9-]{4,29}/)?roles/[a-zA-Z0-9_.]+$"
              validation: Role must be in the format roles/{role_name}.
            member:
              name: member
              title: Member
              regexValidation: "^(user:[^@ ]+@[^@ ]+[.][^@ ]+|serviceAccount:[^@ ]+@[^@ ]+[.][^@ ]+|group:[^@ ]+@[^@ ]+[.][^@ ]+|domain:[^@ ]+[.][^@ ]+|allUsers|allAuthenticatedUsers)$"
              validation: Value must be a valid IAM member, such as user:{email}, serviceAccount:{email}, group:{email}, domain:{domain}, allUsers, or allAuthenticatedUsers
        internal_encryption_config:
          name: internal_encryption_config
          title: Internal Encryption Config
          level: 1
          properties:
            key_rotation_period:
              name: key_rotation_period
              title: Key Rotation Period
              regexValidation: "^(8[6-9][0-9]{3}|9[0-9]{4}|[1-9][0-9]{5,})(.[0-9]{1,9})?s$"
              validation: Must be a duration in seconds, with optional fractional part (up to 9 digits), ending in "s". Must be greater than 86400s (24 hours).
        labels:
          name: labels
          title: Labels
        lifecycle_rules:
          name: lifecycle_rules
          title: Lifecycle Rules
          level: 1
          properties:
            action:
              name: action
              title: Action
              properties:
                type:
                  name: type
                  title: Type
                  enumValueLabels:
                    - label: DELETE
                      value: Delete
                    - label: SET_STORAGE_CLASS
                      value: SetStorageClass
                storage_class:
                  name: storage_class
                  title: Storage Class
                  enumValueLabels:
                    - label: STANDARD
                      value: STANDARD
                    - label: MULTI_REGIONAL
                      value: MULTI_REGIONAL
                    - label: REGIONAL
                      value: REGIONAL
                    - label: NEARLINE
                      value: NEARLINE
                    - label: COLDLINE
                      value: COLDLINE
                    - label: ARCHIVE
                      value: ARCHIVE
            condition:
              name: condition
              title: Condition
              properties:
                age:
                  name: age
                  title: Age
                  min: 0
                created_before:
                  name: created_before
                  title: Created Before
                  regexValidation: "^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$"
                  validation: Must be a date in RFC 3339 format (YYYY-MM-DD)
                with_state:
                  name: with_state
                  title: With State
                  enumValueLabels:
                    - label: LIVE
                      value: LIVE
                    - label: ARCHIVED
                      value: ARCHIVED
                    - label: ANY
                      value: ANY
                matches_storage_class:
                  name: matches_storage_class
                  title: Matches Storage Class
                  enumValueLabels:
                    - label: STANDARD
                      value: STANDARD
                    - label: MULTI_REGIONAL
                      value: MULTI_REGIONAL
                    - label: REGIONAL
                      value: REGIONAL
                    - label: NEARLINE
                      value: NEARLINE
                    - label: COLDLINE
                      value: COLDLINE
                    - label: ARCHIVE
                      value: ARCHIVE
                num_newer_versions:
                  name: num_newer_versions
                  title: Num Newer Versions
                  min: 0
                custom_time_before:
                  name: custom_time_before
                  title: Custom Time Before
                  regexValidation: "^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$"
                  validation: Must be a date in RFC 3339 format (YYYY-MM-DD)
                days_since_custom_time:
                  name: days_since_custom_time
                  title: Days Since Custom Time
                  min: 0
                days_since_noncurrent_time:
                  name: days_since_noncurrent_time
                  title: Days Since Noncurrent Time
                  min: 0
                noncurrent_time_before:
                  name: noncurrent_time_before
                  title: Noncurrent Time Before
                  regexValidation: "^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$"
                  validation: Must be a date in RFC 3339 format (YYYY-MM-DD)
        location:
          name: location
          title: Location
        log_bucket:
          name: log_bucket
          title: Log Bucket
        log_object_prefix:
          name: log_object_prefix
          title: Log Object Prefix
        name:
          name: name
          title: Name
          regexValidation: ^[a-z0-9][a-z0-9-_.]{2,61}[a-z0-9]$
          validation: Use lowercase letters, numbers,underscores, periods and hyphens. Start with a letter/number and end with letter/number. Must be between 3 and 63 characters.
        project_id:
          name: project_id
          title: Project Id
        public_access_prevention:
          name: public_access_prevention
          title: Public Access Prevention
          enumValueLabels:
            - label: INHERITED
              value: inherited
            - label: ENFORCED
              value: enforced
        retention_policy:
          name: retention_policy
          title: Retention Policy
          level: 1
          properties:
            retention_period:
              name: retention_period
              title: Retention Period
              min: 1
              max: 3155760000
        soft_delete_policy:
          name: soft_delete_policy
          title: Soft Delete Policy
          properties:
            retention_duration_seconds:
              name: retention_duration_seconds
              title: Retention Duration Seconds
              min: 0
              max: 7776000
        storage_class:
          name: storage_class
          title: Storage Class
          enumValueLabels:
            - label: STANDARD
              value: STANDARD
            - label: MULTI_REGIONAL
              value: MULTI_REGIONAL
            - label: REGIONAL
              value: REGIONAL
            - label: NEARLINE
              value: NEARLINE
            - label: COLDLINE
              value: COLDLINE
            - label: ARCHIVE
              value: ARCHIVE
          level: 1
          altDefaults:
            - type: ALTERNATE_TYPE_DC
              value: STANDARD
        versioning:
          name: versioning
          title: Versioning
          level: 1
        website:
          name: website
          title: Website
          properties:
            main_page_suffix:
              name: main_page_suffix
              title: Main Page Suffix
              regexValidation: "^[A-Za-z0-9._-]+$"
              validation: Must be a valid Cloud Storage object name. It may contain any UTF-8 characters except control characters
            not_found_page:
              name: not_found_page
              title: Not Found Page
              regexValidation: "^[A-Za-z0-9._-]+$"
              validation: Must be a valid Cloud Storage object name. It may contain letters (a–z, A–Z), numbers (0–9), dots (.), underscores (_), slashes (/), and hyphens (-)
